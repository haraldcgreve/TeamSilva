@model ImgLatLong.Models.ImageListViewModel
@{
    ViewBag.Title = "Images by Location";
}
<h2>@ViewBag.Title.</h2>
<h3>@ViewBag.Message</h3>

<div>
  @using (Html.BeginForm("Index", "Images", FormMethod.Post, new { @class = "form-horizontal", role = "form" }))
  {
    @Html.AntiForgeryToken()
    <hr />
    @Html.ValidationSummary("", new { @class = "text-danger" })
    <div class="form-group">
        <label class="col-md-2 control-label"></label>
        <div class="col-md-10">
            
            <input id="query" name="query" placeholder="Name of the city" class="form-control"/>
        </div>
    </div>
     <div class="form-group">
        <div class="col-md-offset-2 col-md-10">
            <input type="submit" class="btn btn-default" value="Search" />
        </div>
    </div>


    
  }

    <input type="button" id="ajaxTest" value="Test"/>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js">

    </script >
        <script language = "javascript" >
            $("#ajaxTest").click(function() {
                $.ajax({
                    url: 'Images/GetImageJson?query=Vauxhall,London',
                    type: 'GET',
                    dataType: 'json',
                    contentType: 'application/json; charset=utf-8',
                    error: function(xhr) {
                        alert('Error: ' + xhr.statusText);
                    },
                    success: function(result) {
                        console.log(result);
                    },
                    async: true,
                    processData: false
                });
            });

    </script>

    @if (Model != null && Model.ImageList.Count()>0)
   {

    <ul>
        @foreach (var img in Model.ImageList)
        {
        
            
            <li><img src="@img.ImageUrl" alt=""/></li>


        }

    </ul>
   }
   else
   {

    < span > Type in the City</ span >
    }

    


</div>

